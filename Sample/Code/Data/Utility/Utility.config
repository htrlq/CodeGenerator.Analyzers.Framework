<?xml version="1.0" encoding="utf-8"?>
<SQLConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SQLList>
    <SQL SQLKey="Utility.SerialNumberHelper.GenerateSerialNumber" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
          SET @Output:=@Step;

          UPDATE serial_number_seed
	          SET SerialNumber = (@Output := SerialNumber + @Step)
          WHERE Type = @Type;

          SET @RowCount:= row_count();
          INSERT INTO serial_number_seed
          (
	           Type
	          ,SerialNumber
          )
          SELECT
          @Type
          ,@Step
          FROM DUAL 
          WHERE @RowCount = 0;

          SELECT @Output
				]]>
      </Text>
    </SQL>  
  </SQLList>
</SQLConfig>
