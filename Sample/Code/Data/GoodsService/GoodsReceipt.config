<?xml version="1.0" encoding="utf-8"?>
<SQLConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SQLList>
    <SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceipt" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
					SELECT
						SysNo,
						SysCode,
						ReceiptCode,
						ReceiptType,
						ReceiptMode,
						ProjectSysNo,
						ProjectName,
						SupplierSysCode,
						SupplierName,
						CompleteTime,
						ReceiptStatus,
						ObsoleteReason,
						DeliveryReceiptSysCode,
						OrderCode,
						ContractCode,
						PurchaseType,
						UserSignatureUrl,
						Source,
            OperatorUserName,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus 
					FROM
						goods_receipt
          WHERE SysCode = @SysCode
						AND CommonStatus = @CommonStatus;
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiptWithDetail" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
					SELECT
						gr.SysNo,
						gr.SysCode,
						gr.ReceiptCode,
						gr.ReceiptType,
						gr.ReceiptMode,
						gr.ProjectSysNo,
						gr.ProjectName,
						gr.SupplierSysCode,
						gr.SupplierName,
						gr.CompleteTime,
						gr.ReceiptStatus,
						gr.ObsoleteReason,
						gr.DeliveryReceiptSysCode,
						gr.OrderCode,
						gr.ContractCode,
						gr.PurchaseType,
						gr.UserSignatureUrl,
						gr.Source,
            gr.OperatorUserName,
						gr.InUserSysNo,
						gr.InUserName,
						gr.InDate,
						gr.EditUserSysNo,
						gr.EditUserName,
						gr.EditDate,
						gr.CommonStatus,
            dr.ReceiptCode DeliveryReceiptCode
					FROM goods_receipt gr
          LEFT JOIN delivery_receipt dr ON gr.DeliveryReceiptSysCode = dr.SysCode
          WHERE gr.SysCode = @GoodsReceiptSysCode
						AND gr.CommonStatus = @CommonStatus;
            
					SELECT
						SysNo,
						SysCode,
						ReceiptSysCode,
						BatchOrder,
						PlateNumber,
						GrossWeight,
						TareWeight,
						NetWeight,
						DeductedWeight,
						Memo,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus 
					FROM
						goods_receipt_batch
					WHERE
						ReceiptSysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;
            
          SELECT
						grbp.SysNo,
						grbp.SysCode,
						grbp.ReceiptSysCode,
						grbp.BatchSysCode,
						grbp.ProductOrder,
						grbp.ProductSysCode,
						grbp.ProductName,
						grbp.ProductModel,
						grbp.ProductBrand,
						grbp.ExpectedValue,
						grbp.ExpectedUnitName,
						grbp.ActualValue,
						grbp.ActualDeductedValue,
						grbp.ActualUnitName,
						grbp.ExpectedToActualRate,
						grbp.DeviationRate,
						grbp.UpperThreshold,
						grbp.LowerThreshold,
						grbp.DeviationStatus,
						grbp.UnitPrice,
						grbp.TaxRate,
						grbp.Memo,
						grbp.InUserSysNo,
						grbp.InUserName,
						grbp.InDate,
						grbp.EditUserSysNo,
						grbp.EditUserName,
						grbp.EditDate,
						grbp.CommonStatus,
            gp.ProductCode
					FROM
						goods_receipt_batch_product grbp
            LEFT JOIN goods_product gp ON grbp.ProductSysCode = gp.SysCode
					WHERE
						grbp.ReceiptSysCode = @GoodsReceiptSysCode
						AND grbp.CommonStatus = @CommonStatus;                 
            
					SELECT
						SysNo,
						SysCode,
						ReceiptSysCode,
						BatchSysCode,
						CarWeighingSysCode,
						AttachmentType,
						AttachmentName,
						AttachmentUrl,
						AttachmentTime,
						AttachmentLocalPath,
						LocationLatitude,
						LocationLongitude,
						LocationAddress,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus
					FROM
						goods_receipt_batch_attachment
					WHERE
						ReceiptSysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;    
            
					SELECT
						gcwl.SysNo,
						gcwl.SysCode,
						gcwl.BatchSysCode,
						gcwl.ProjectSysNo,
						gcwl.PlateNumber,
						gcwl.BeforeModificationPlateNumber,
						gcwl.WeighingType,
						gcwl.Weight,
						gcwl.`Status`,
						gcwl.WeighingOrder,
						gcwl.MatchStatus,
						gcwl.MatchCarWeighingSysCode,
						gcwl.WeighingMode,
						gcwl.WeighingTime,
						gcwl.InUserSysNo,
						gcwl.InUserName,
						gcwl.InDate,
						gcwl.EditUserSysNo,
						gcwl.EditUserName,
						gcwl.EditDate,
						gcwl.CommonStatus
					FROM
						goods_carweighinglist gcwl
						INNER JOIN goods_receipt_batch grb
							ON  gcwl.BatchSysCode = grb.SysCode
              AND grb.ReceiptSysCode = @GoodsReceiptSysCode
              AND grb.CommonStatus = @CommonStatus
				]]>
      </Text>
    </SQL>
		
		<SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceipt_BatchList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				 SELECT
						grb.SysNo,
						grb.SysCode,
						grb.ReceiptSysCode,
						grb.BatchOrder,
						grb.PlateNumber,
						grb.GrossWeight,
						grb.TareWeight,
						grb.NetWeight,
						grb.DeductedWeight,
						grb.Memo,
						grb.CommonStatus 
					FROM
						goods_receipt_batch grb
					WHERE 
					  grb.CommonStatus = 1 
						AND grb.ReceiptSysCode in (@SysCodeList)
				 	]]>
			</Text>
		</SQL>
		
		<SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceipt_ProductList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
						grbp.SysNo,
						grbp.SysCode,
						grbp.ReceiptSysCode,
						grbp.BatchSysCode,
						grbp.ProductOrder,
						grbp.ProductSysCode,
						grbp.ProductName,
						grbp.ProductModel,
						grbp.ProductBrand,
						grbp.ExpectedValue,
						grbp.ExpectedUnitName,
						grbp.ActualValue,
						grbp.ActualDeductedValue,
						grbp.ActualUnitName,
						grbp.ExpectedToActualRate,
						grbp.DeviationRate,
						grbp.UpperThreshold,
						grbp.LowerThreshold,
						grbp.DeviationStatus,
						grbp.UnitPrice,
						grbp.TaxRate,
						grbp.Memo,
						grbp.CommonStatus 
					FROM
						goods_receipt_batch_product grbp
					WHERE 
					  grbp.CommonStatus = 1 
						AND grbp.ReceiptSysCode in (@SysCodeList)
				 	]]>
			</Text>
		</SQL>
		
		<SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceipt_AttachmentList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
						grba.SysNo,
						grba.SysCode,
						grba.ReceiptSysCode,
						grba.BatchSysCode,
						grba.CarWeighingSysCode,
						grba.AttachmentType,
						grba.AttachmentName,
						grba.AttachmentUrl,
						grba.AttachmentTime,
						grba.AttachmentLocalPath,
						grba.LocationLatitude,
						grba.LocationLongitude,
						grba.LocationAddress,
						grba.CommonStatus
					FROM
						goods_receipt_batch_attachment grba
					WHERE 
					  grba.CommonStatus = 1 
						AND grba.ReceiptSysCode in (@SysCodeList)
				 	]]>
			</Text>
		</SQL>
		
		<SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceipt_CarweighingList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				  SELECT
						gcwl.SysNo,
						gcwl.SysCode,
						gcwl.BatchSysCode,
						gcwl.ProjectSysNo,
						gcwl.PlateNumber,
						gcwl.BeforeModificationPlateNumber,
						gcwl.WeighingType,
						gcwl.Weight,
						gcwl.`Status`,
						gcwl.WeighingOrder,
						gcwl.MatchStatus,
						gcwl.MatchCarWeighingSysCode,
						gcwl.WeighingMode,
						gcwl.WeighingTime,
						gcwl.CommonStatus
					FROM
						goods_carweighinglist gcwl
						INNER JOIN goods_receipt_batch grb 
						ON gcwl.BatchSysCode = grb.SysCode
					WHERE
					  grb.CommonStatus = 1 
						AND grb.ReceiptSysCode in (@SysCodeList)
				 	]]>
			</Text>
		</SQL>
		
    <SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceipts" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
				 SELECT
					  gr.SysNo,
						gr.SysCode,
						gr.ReceiptCode,
						gr.ReceiptType,
						gr.ReceiptMode,
						gr.ProjectSysNo,
						gr.ProjectName,
						gr.SupplierSysCode,
						gr.SupplierName,
						gr.CompleteTime,
						gr.ReceiptStatus,
						gr.ObsoleteReason,
						gr.DeliveryReceiptSysCode,
						gr.OrderCode,
						gr.ContractCode,
						gr.PurchaseType,
						gr.UserSignatureUrl,
						gr.Source,
            gr.OperatorUserName,
						gr.CommonStatus,
						dr.ReceiptCode DeliveryReceiptCode
					FROM 
					  yz_ers.goods_receipt gr
						LEFT JOIN yz_ers.delivery_receipt dr ON gr.DeliveryReceiptSysCode = dr.SysCode
					WHERE
						gr.CommonStatus != -999
						AND gr.ReceiptType = 1
						#{ AND gr.CommonStatus = @CommonStatus }
						#{ AND gr.ProjectSysNo = @ProjectSysNo }
						#{ AND (gr.ReceiptCode LIKE CONCAT('%',@Keywords,'%') OR gr.SupplierName LIKE CONCAT('%',@Keywords,'%'))}
						#{ AND gr.ReceiptStatus in (@Statuses) }
						#{ AND gr.Source in (@Sources) }
					ORDER BY
						gr.EditDate DESC
				]]>
      </Text>
    </SQL>

    <SQL SQLKey="Goods.GoodsReceipt.GetGoodsReceiveReceiptWithDetailByDeliveryReceiptSysCode" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
					SELECT SysCode INTO @GoodsReceiptSysCode
					FROM goods_receipt
					WHERE DeliveryReceiptSysCode = @DeliveryReceiptSysCode
						AND CommonStatus = @CommonStatus
          LIMIT 1;
					
					SELECT
						SysNo,
						SysCode,
						ReceiptCode,
						ReceiptType,
						ReceiptMode,
						ProjectSysNo,
						ProjectName,
						SupplierSysCode,
						SupplierName,
						CompleteTime,
						ReceiptStatus,
						ObsoleteReason,
						DeliveryReceiptSysCode,
						OrderCode,
						ContractCode,
						PurchaseType,
						UserSignatureUrl,
						Source,
            OperatorUserName,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus
					FROM goods_receipt
          WHERE SysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;
            
					SELECT
						SysNo,
						SysCode,
						ReceiptSysCode,
						BatchOrder,
						PlateNumber,
						GrossWeight,
						TareWeight,
						NetWeight,
						DeductedWeight,
						Memo,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus 
					FROM
						goods_receipt_batch
					WHERE
						ReceiptSysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;
            
          SELECT
						SysNo,
						SysCode,
						ReceiptSysCode,
						BatchSysCode,
						ProductOrder,
						ProductSysCode,
						ProductName,
						ProductModel,
						ProductBrand,
						ExpectedValue,
						ExpectedUnitName,
						ActualValue,
						ActualDeductedValue,
						ActualUnitName,
						ExpectedToActualRate,
						DeviationRate,
						UpperThreshold,
						LowerThreshold,
						DeviationStatus,
						UnitPrice,
						TaxRate,
						Memo,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus 
					FROM
						goods_receipt_batch_product
					WHERE
						ReceiptSysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;                 
            
					SELECT
						SysNo,
						SysCode,
						ReceiptSysCode,
						BatchSysCode,
						CarWeighingSysCode,
						AttachmentType,
						AttachmentName,
						AttachmentUrl,
						AttachmentTime,
						AttachmentLocalPath,
						LocationLatitude,
						LocationLongitude,
						LocationAddress,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus
					FROM
						goods_receipt_batch_attachment
					WHERE
						ReceiptSysCode = @GoodsReceiptSysCode
						AND CommonStatus = @CommonStatus;       
            
          SELECT
						gcwl.SysNo,
						gcwl.SysCode,
						gcwl.BatchSysCode,
						gcwl.ProjectSysNo,
						gcwl.PlateNumber,
						gcwl.BeforeModificationPlateNumber,
						gcwl.WeighingType,
						gcwl.Weight,
						gcwl.`Status`,
						gcwl.WeighingOrder,
						gcwl.MatchStatus,
						gcwl.MatchCarWeighingSysCode,
						gcwl.WeighingMode,
						gcwl.WeighingTime,
						gcwl.InUserSysNo,
						gcwl.InUserName,
						gcwl.InDate,
						gcwl.EditUserSysNo,
						gcwl.EditUserName,
						gcwl.EditDate,
						gcwl.CommonStatus
					FROM
						goods_carweighinglist gcwl
						INNER JOIN goods_receipt_batch grb 
							ON gcwl.BatchSysCode = grb.SysCode 
							AND grb.ReceiptSysCode = @GoodsReceiptSysCode 
              AND grb.CommonStatus = @CommonStatus
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.QueryStandingBook" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
				select SysCode
										,ReceiptCode
										,SupplierName
										,ProjectName
										, MIN(WeighingTime) AS  WeighingTime
										,SUM(NetWeight) AS NetWeight
										,SUM(DeductedWeight) AS DeductedWeight
										,SUM(ExpectedValue) AS ExpectedValue 
										,SUM(ActualValue) ActualValue
FROM (select  SysCode
										,ReceiptCode
										,SupplierName
										,ProjectName
										,MIN(WeighingTime) AS WeighingTime 
										,NetWeight
										,DeductedWeight
										,SUM(ExpectedValue) AS ExpectedValue 
										,SUM(ActualValue) ActualValue
                                      
                                        ,GRBSysCode 
                                        from (SELECT  distinct
										 GR.SysCode
										,GR.ReceiptCode
										,GR.SupplierName
										,GR.ProjectName
										,IFNULL(CW.WeighingTime,GR.CompleteTime) WeighingTime 
										,IFNULL(GRB.NetWeight,0) NetWeight
										,IFNULL(GRB.DeductedWeight,0) DeductedWeight
										,IFNULL(GRBP.ExpectedValue,0)*ifnull(GRBP.ExpectedToActualRate,1) AS ExpectedValue 
										,IFNULL(GRBP.ActualValue,0) ActualValue
                                        ,GRBP.ProductSysCode
                                        ,GRB.SysCode GRBSysCode 
									FROM goods_receipt GR
									INNER JOIN goods_receipt_batch GRB
									ON(GR.SysCode=GRB.ReceiptSysCode)
									LEFT JOIN goods_receipt_batch_product GRBP
									ON(	GR.SysCode=GRBP.ReceiptSysCode)
									LEFT JOIN goods_carweighinglist CW
									ON(CW.BatchSysCode=GRB.SysCode)
									WHERE 
										#{ AND GR.ProjectSysNo=@ProjectSysNo }
										#{ AND GR.ReceiptStatus IN (@ReceiptStatusList) }
										#{ AND GR.ProjectSysNo IN(@ProjectSysNoList) }
										#{ AND GR.CommonStatus=@CommonStatus }
										#{ AND GR.ReceiptMode=@ReceiptMode }
										#{ AND GR.ReceiptType=@ReceiptType }
										#{ AND IFNULL(CW.WeighingTime,GR.CompleteTime)>=@DateBegin }
										#{ AND IFNULL(CW.WeighingTime,GR.CompleteTime)<=@DateEnd }
										#{ AND (GR.ReceiptCode LIKE CONCAT('%',@Keywords,'%') OR GR.SupplierName LIKE CONCAT('%',@Keywords,'%')) }
										#{ AND GR.SysCode IN(@SysCodes)}
										GROUP BY GR.SysCode
										,GR.ReceiptCode
										,GR.SupplierName
										,GR.ProjectName
										,IFNULL(GRB.NetWeight,0) 
										,IFNULL(GRB.DeductedWeight,0) 
										,IFNULL(GRBP.ExpectedValue,0)*ifnull(GRBP.ExpectedToActualRate,1) 
										,IFNULL(GRBP.ActualValue,0)	,GRBP.ProductSysCode,GRB.SysCode
                                        ) A_1
                                        group by  SysCode
										,ReceiptCode
										,SupplierName
										,ProjectName
										,NetWeight
										,DeductedWeight
                                        ,GRBSysCode ) A_2
                                         group by  SysCode
										,ReceiptCode
										,SupplierName
										,ProjectName
										,NetWeight
										,DeductedWeight
                   order by WeighingTime DESC;
				]]>
      </Text>
    </SQL>
    
    <SQL SQLKey="Goods.GoodsReceipt.QueryAccountDetail" ConnectionKey="MainRead">
      <Text>
        <![CDATA[
					 
              SELECT
								 GR.SysNo,
								 GR.SysCode,
								 GR.ReceiptCode,
								 GR.ReceiptType,
								 GR.ReceiptMode,
								 GR.ProjectSysNo,
								 GR.ProjectName,
								 GR.SupplierSysCode,
								 GR.SupplierName,
								 GR.CompleteTime,
								 GR.ReceiptStatus,
								 GR.ObsoleteReason,
								 GR.DeliveryReceiptSysCode,
								 GR.OrderCode,
								 GR.ContractCode,
								 GR.PurchaseType,
								 GR.UserSignatureUrl,
								 GR.Source,
                 GR.OperatorUserName,
								 GR.InUserSysNo,
								 GR.InUserName,
								 GR.InDate,
								 GR.EditUserSysNo,
								 GR.EditUserName,
								 GR.EditDate,
								 GR.CommonStatus,
								 DR.ReceiptCode AS DeliveryReceiptCode,
								 DR.DeliveryDate
							FROM goods_receipt GR
							LEFT JOIN delivery_receipt DR ON
							(GR.DeliveryReceiptSysCode=DR.SysCode)
              WHERE GR.SysCode=@SysCode ;
              
              SELECT 
									SysNo,
									SysCode,
									ReceiptSysCode,
									BatchOrder,
									PlateNumber,
									GrossWeight,
									TareWeight,
									NetWeight,
									DeductedWeight,
									Memo,
									InUserSysNo,
									InUserName,
									InDate,
									EditUserSysNo,
									EditUserName,
									EditDate,
									CommonStatus
							FROM goods_receipt_batch
							WHERE ReceiptSysCode=@SysCode;
              
              SELECT 
									SysNo,
									SysCode,
									ReceiptSysCode,
									BatchSysCode,
									ProductOrder,
									ProductSysCode,
									ProductName,
									ProductModel,
									ProductBrand,
									ExpectedValue,
									ExpectedUnitName,
									ActualValue,
									ifnull(ActualDeductedValue,0) ActualDeductedValue,
									ActualUnitName,
									ifnull(ExpectedToActualRate,1) ExpectedToActualRate,
									ifnull(DeviationRate,0) DeviationRate,
									UpperThreshold,
									LowerThreshold,
									ifnull(DeviationStatus,1) DeviationStatus,
									ifnull(UnitPrice,0.000) UnitPrice,
									ifnull(TaxRate,0.00) TaxRate,
									ifnull(Memo,'') Memo,
									InUserSysNo,
									InUserName,
									InDate,
									EditUserSysNo,
									EditUserName,
									EditDate,
									CommonStatus
							FROM goods_receipt_batch_product	
							WHERE ReceiptSysCode=@SysCode;
              
              SELECT 
									SysNo,
									SysCode,
									ReceiptSysCode,
									BatchSysCode,
									CarWeighingSysCode,
									AttachmentType,
									AttachmentName,
									AttachmentUrl,
									AttachmentTime,
									AttachmentLocalPath,
									LocationLatitude,
									LocationLongitude,
									LocationAddress,
									InUserSysNo,
									InUserName,
									InDate,
									EditUserSysNo,
									EditUserName,
									EditDate,
									CommonStatus
							FROM goods_receipt_batch_attachment
							WHERE ReceiptSysCode=@SysCode;
              
              SELECT 
									SysNo,
									SysCode,
									BatchSysCode,
									ProjectSysNo,
									PlateNumber,
									BeforeModificationPlateNumber,
									WeighingType,
									Weight,
									`Status`,
									WeighingOrder,
									MatchStatus,
									MatchCarWeighingSysCode,
									WeighingMode,
									WeighingTime,
									InUserSysNo,
									InUserName,
									InDate,
									EditUserSysNo,
									EditUserName,
									EditDate,
									CommonStatus
							FROM goods_carweighinglist
							WHERE BatchSysCode IN( 
							SELECT 
									SysCode
							FROM goods_receipt_batch
							WHERE ReceiptSysCode=@SysCode);
				]]>
      </Text>
    </SQL>

    <SQL SQLKey="Goods.GoodsReceipt.InsertGoodsReceipt" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					INSERT INTO goods_receipt (
						SysCode,
						ReceiptCode,
						ReceiptType,
						ReceiptMode,
						ProjectSysNo,
						ProjectName,
						SupplierSysCode,
						SupplierName,
						CompleteTime,
						ReceiptStatus,
						ObsoleteReason,
						DeliveryReceiptSysCode,
						OrderCode,
						ContractCode,
						PurchaseType,
						UserSignatureUrl,
						Source,
            OperatorUserName,
						InUserSysNo,
						InUserName,
						InDate,
						EditUserSysNo,
						EditUserName,
						EditDate,
						CommonStatus 
					)
					VALUES
					(
						@SysCode,
						@ReceiptCode,
						@ReceiptType,
						@ReceiptMode,
						@ProjectSysNo,
						@ProjectName,
						@SupplierSysCode,
						@SupplierName,
						@CompleteTime,
						@ReceiptStatus,
						@ObsoleteReason,
						@DeliveryReceiptSysCode,
						@OrderCode,
						@ContractCode,
						@PurchaseType,
						@UserSignatureUrl,
						@Source,
            @OperatorUserName,
						@InUserSysNo,
						@InUserName,
						NOW( 3 ),
						@EditUserSysNo,
						@EditUserName,
						NOW( 3 ),
						@CommonStatus 
					)
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.BatchInsertGoodsReceiptBatch" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					$BATCHINSERT${[
						INSERT INTO goods_receipt_batch (
							SysCode,
							ReceiptSysCode,
							BatchOrder,
							PlateNumber,
							GrossWeight,
							TareWeight,
							NetWeight,
							DeductedWeight,
							Memo,
							InUserSysNo,
							InUserName,
							InDate,
							EditUserSysNo,
							EditUserName,
							EditDate,
							CommonStatus 
						)
						VALUES
						(
							@SysCode,
							@ReceiptSysCode,
							@BatchOrder,
							@PlateNumber,
							@GrossWeight,
							@TareWeight,
							@NetWeight,
							@DeductedWeight,
							@Memo,
							@InUserSysNo,
							@InUserName,
							NOW( 3 ),
							@EditUserSysNo,
							@EditUserName,
							NOW( 3 ),
							@CommonStatus 
						)
          ]}
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.BatchInsertGoodsReceiptBatchProducts" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					$BATCHINSERT${[
						INSERT INTO goods_receipt_batch_product (
							SysCode,
							ReceiptSysCode,
							BatchSysCode,
							ProductOrder,
							ProductSysCode,
							ProductName,
							ProductModel,
							ProductBrand,
							ExpectedValue,
							ExpectedUnitName,
							ActualValue,
							ActualDeductedValue,
							ActualUnitName,
							ExpectedToActualRate,
							DeviationRate,
							UpperThreshold,
							LowerThreshold,
							DeviationStatus,
							UnitPrice,
							TaxRate,
							Memo,
							InUserSysNo,
							InUserName,
							InDate,
							EditUserSysNo,
							EditUserName,
							EditDate,
							CommonStatus 
						)
						VALUES
						(
							@SysCode,
							@ReceiptSysCode,
							@BatchSysCode,
							@ProductOrder,
							@ProductSysCode,
							@ProductName,
							@ProductModel,
							@ProductBrand,
							@ExpectedValue,
							@ExpectedUnitName,
							@ActualValue,
							@ActualDeductedValue,
							@ActualUnitName,
							@ExpectedToActualRate,
							@DeviationRate,
							@UpperThreshold,
							@LowerThreshold,
							@DeviationStatus,
							@UnitPrice,
							@TaxRate,
							@Memo,
							@InUserSysNo,
							@InUserName,
							NOW( 3 ),
							@EditUserSysNo,
							@EditUserName,
							NOW( 3 ),
							@CommonStatus
						)
          ]}
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.BatchInsertGoodsReceiptBatchAttachments" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					$BATCHINSERT${[
						INSERT INTO goods_receipt_batch_attachment (
							SysCode,
							ReceiptSysCode,
							BatchSysCode,
							CarWeighingSysCode,
							AttachmentType,
							AttachmentName,
							AttachmentUrl,
							AttachmentTime,
							AttachmentLocalPath,
							LocationLatitude,
							LocationLongitude,
							LocationAddress,
							InUserSysNo,
							InUserName,
							InDate,
							EditUserSysNo,
							EditUserName,
							EditDate,
							CommonStatus 
						)
						VALUES
						(
							@SysCode,
							@ReceiptSysCode,
							@BatchSysCode,
							@CarWeighingSysCode,
							@AttachmentType,
							@AttachmentName,
							@AttachmentUrl,
							@AttachmentTime,
							@AttachmentLocalPath,
							@LocationLatitude,
							@LocationLongitude,
							@LocationAddress,
							@InUserSysNo,
							@InUserName,
							NOW( 3 ),
							@EditUserSysNo,
							@EditUserName,
							NOW( 3 ),
							@CommonStatus 
						)
          ]}
				]]>
      </Text>
    </SQL>

    <SQL SQLKey="Goods.GoodsReceipt.UpdateGoodsReceipt" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					UPDATE goods_receipt
					SET SysCode = @SysCode,
							ReceiptCode = @ReceiptCode,
							ReceiptType = @ReceiptType,
							ReceiptMode = @ReceiptMode,
							ProjectSysNo = @ProjectSysNo,
							ProjectName = @ProjectName,
							SupplierSysCode = @SupplierSysCode,
							SupplierName = @SupplierName,
							CompleteTime = NOW(3),
							ReceiptStatus = @ReceiptStatus,
							ObsoleteReason = @ObsoleteReason,
							DeliveryReceiptSysCode = @DeliveryReceiptSysCode,
							OrderCode = @OrderCode,
							ContractCode = @ContractCode,
							PurchaseType = @PurchaseType,
							UserSignatureUrl = @UserSignatureUrl,
							Source = @Source,
              OperatorUserName = @OperatorUserName,
							InUserSysNo = @InUserSysNo,
							InUserName = @InUserName,
							InDate = NOW(3),
							EditUserSysNo = @EditUserSysNo,
							EditUserName = @EditUserName,
							EditDate = NOW(3),
							CommonStatus = @CommonStatus
					WHERE ReceiptCode = @ReceiptCode;
				]]>
      </Text>
    </SQL>
    <SQL SQLKey="Goods.GoodsReceipt.ObsoleteClientReceiveReceipt" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					UPDATE client_receivereceipt
					SET `Status` = @Status,
							ObsoleteReason = @ObsoleteReason,
							EditUserSysNo = @UserSysNo,
							EditUserName = @UserName,
							EditDate = NOW(3)
					WHERE SysCode = @SysCode;
		
					UPDATE client_receivereceiptreceivingdetail
					SET ReceivingDetailStatus = @ReceivingDetailStatus,
							EditUserSysNo = @UserSysNo,
							EditUserName = @UserName,
							EditDate = NOW(3)
					WHERE ReceiveReceiptSysCode = @SysCode
				]]>
      </Text>
    </SQL>

    <SQL SQLKey="Goods.GoodsReceipt.DeleteGoodsReceiptDetails" ConnectionKey="MainWrite">
      <Text>
        <![CDATA[
					DELETE FROM goods_receipt_batch
					WHERE ReceiptSysCode = @GoodsReceiptSysCode;
          
          DELETE FROM goods_receipt_batch_product
          WHERE ReceiptSysCode = @GoodsReceiptSysCode;
          
          DELETE FROM goods_receipt_batch_attachment
          WHERE ReceiptSysCode = @GoodsReceiptSysCode;
				]]>
      </Text>
    </SQL>


    
  </SQLList>
</SQLConfig>
