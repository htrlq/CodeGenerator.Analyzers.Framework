<?xml version="1.0" encoding="utf-8"?>
<SQLConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<SQLList>
		
		<!-- 获取角色List -->
		<SQL SQLKey="role.GetRoleList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
				SysNo,
				SysCode,
				RoleName,
				Memo,
				CommonStatus
				FROM
				system_role
				where SysCode in (@RoleSysCodes)					
				]]>
			</Text>
		</SQL>

		<SQL SQLKey="role.DeleteUserRole" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				DELETE 
				FROM
					system_user_role 
				WHERE
					UserSysCode = @UserSysCode
					AND BizSysCode = @BizSysCode 
					AND UserType = @UserType;				
				]]>
			</Text>
		</SQL>

		<!-- 批量添加用户权限 -->
		<SQL SQLKey="role.BindUserRole" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				$BATCHINSERT${[
				INSERT INTO `system_user_role`
				(`UserSysCode`, `RoleSysCode`,
				 `InUserSysNo`, `InUserName`, `InDate`,
				 `BizSysCode`, `UserType`)
				VALUES
				(@UserSysCode, @RoleSysCode,
				 @InUserSysNo, @InUserName, @InDate,
				 @BizSysCode, @UserType)
				]} 
				]]>
			</Text>
		</SQL>

		<!-- 获取项目角色权限 -->
		<SQL SQLKey="role.GetProjectUserRoleList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
				role.SysNo,
				role.SysCode,
				role.RoleName,
				role.Memo,
				role.CommonStatus
				FROM system_role role
				LEFT JOIN system_user_role userrole on userrole.RoleSysCode = role.SysCode
				where userrole.UserType = 2 and userrole.BizSysCode = @BizSysCode and userrole.UserSysCode = @UserSysCode;
				]]>
			</Text>
		</SQL>

		<!-- 获取组织角色权限 -->
		<SQL SQLKey="role.GetOrganizationUserRoleList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
				role.SysNo,
				role.SysCode,
				role.RoleName,
				role.Memo,
				role.CommonStatus
				FROM system_role role
				LEFT JOIN system_user_role userrole on userrole.RoleSysCode = role.SysCode
				where userrole.UserType = 1 and userrole.BizSysCode = @BizSysCode and userrole.UserSysCode = @UserSysCode;
				]]>
			</Text>
		</SQL>

		<!-- 获取用户权限列表 -->
		<SQL SQLKey="role.GetUserRoleList" ConnectionKey="MainRead">
			<Text>
				<![CDATA[
				SELECT
					role.SysNo,
					role.SysCode,
					role.RoleName,
					role.CommonStatus
				FROM system_role role
					LEFT JOIN system_user_role userrole on userrole.RoleSysCode = role.SysCode
				where role.CommonStatus = 1 AND  userrole.UserType = @UserType AND userrole.BizSysCode = @BizSysCode AND userrole.UserSysCode = @UserSysCode;
				]]>
			</Text>
		</SQL>
		
	</SQLList>
</SQLConfig>